<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœŸæœ«è€ƒçœ‹æ¿ç³»çµ±</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        /* éš±è—æ•¸å­—è¼¸å…¥æ¡†çš„ç®­é ­ */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none; 
            margin: 0; 
        }
        
        /* è‡ªå®šç¾©å­—é«”èˆ‡å…¨è¢å¹•ä½ˆå±€ */
        body {
            font-family: "Microsoft JhengHei", "Heiti TC", sans-serif;
            overflow: hidden; /* é˜²æ­¢æ»¾å‹• */
            background-color: #f3f4f6;
        }

        .text-shadow {
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        /* éš±è—æª”æ¡ˆè¼¸å…¥åŸå§‹æŒ‰éˆ• */
        .hidden-input {
            display: none;
        }

        /* è®“æŒ‰éˆ•åœ¨è¢«é»æ“Šæ™‚æœ‰æ˜é¡¯å›é¥‹ */
        .btn-active:active {
            transform: scale(0.95);
        }

        /* è·‘é“é€²åº¦æ¢å‹•ç•« */
        .track-transition {
            transition: stroke-dashoffset 1s linear, stroke 0.5s ease;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo, useRef } = React;

        // --- è¨­å®šè³‡æ–™ ---
        // å®Œæ•´çš„æ™‚é–“è¡¨
        const SCHEDULE = [
            { type: 'break', start: '08:30', end: '08:35', label: 'æº–å‚™' },
            { type: 'exam',  start: '08:35', end: '09:15', label: 'ç¬¬ä¸€ç¯€' },
            { type: 'break', start: '09:15', end: '09:25', label: 'ä¸‹èª²' },
            { type: 'exam',  start: '09:25', end: '10:05', label: 'ç¬¬äºŒç¯€' },
            { type: 'break', start: '10:05', end: '10:25', label: 'ä¸‹èª² (å¤§)' },
            { type: 'exam',  start: '10:25', end: '11:05', label: 'ç¬¬ä¸‰ç¯€' },
            { type: 'break', start: '11:05', end: '11:15', label: 'ä¸‹èª²' }
        ];

        // åƒ…æå–è€ƒè©¦æ™‚æ®µä¾› A å€é¡¯ç¤ºä½¿ç”¨
        const EXAM_SLOTS = SCHEDULE.filter(s => s.type === 'exam');

        const EXAM_MESSAGES = [
            "è€ƒå·è¨˜å¾—å¯«ä¸Šç­ç´šå§“åå…¨ååº§è™Ÿ",
            "æœ‰å•é¡Œèˆ‰æ‰‹å•è€å¸«ï¼Œéœ€è¦æ’¿æ±è¥¿è«‹ç›£è€ƒè€å¸«å¹«å¿™",
            "ä¸æœƒå¯«çš„é¡Œç›®è·³éå¯«æœƒçš„é¡Œç›®",
            "è€å¿ƒã€ç´°å¿ƒã€å°å¿ƒ",
            "è€ƒå·æœ‰ä¸æœƒçš„å•é¡Œç­‰å‡ºé¡Œè€å¸«ä¾†äº†å†å•",
            "ä¸è¦è½‰é ­ç©æ±è¥¿ï¼Œå¯«å®Œå¤šæª¢æŸ¥",
            "æª¢æŸ¥å®Œå†æª¢æŸ¥æˆ–è¶´ä¸‹ä¼‘æ¯",
            "è€ƒè©¦å³å°‡çµæŸï¼Œæª¢æŸ¥æœ‰æ²’æœ‰å¯«ç­”æ¡ˆæŠ„éŒ¯"
        ];

        const BREAK_MESSAGES = [
            "ç­‰ç›£è€ƒè€å¸«é»å®Œå†é›¢é–‹åº§ä½ä¸‹èª²",
            "åˆ©ç”¨ä¸‹èª²æº–å‚™ä¸‹å€‹ç§‘ç›®èˆ‡æ–‡å…·ç”¨å“",
            "ææ—©ä¸Šå»æ‰€å–æ°´",
            "æ¡Œé¢æ·¨ç©º",
            "æº–å‚™è€ƒè©¦ã€æ”¶æ‹¾ä½ç½®ã€ååœ¨ä½ç½®ä¸Š"
        ];

        // æ ¼å¼åŒ–æ™‚é–“ HH:MM:SS
        const formatTime = (date) => {
            const h = String(date.getHours()).padStart(2, '0');
            const m = String(date.getMinutes()).padStart(2, '0');
            const s = String(date.getSeconds()).padStart(2, '0');
            return `${h}:${m}:${s}`;
        };

        const App = () => {
            // --- ç‹€æ…‹ç®¡ç† ---
            // ç³»çµ±æ™‚é–“èˆ‡åç§»é‡
            const [now, setNow] = useState(new Date());
            const [offset, setOffset] = useState(() => {
                const saved = localStorage.getItem('exam_clock_offset');
                return saved ? parseInt(saved, 10) : 0;
            });

            // éŸ³æª”ç›¸é—œç‹€æ…‹ (é™£åˆ—ï¼Œå°æ‡‰ 3 å€‹æ™‚æ®µ)
            const [audioTracks, setAudioTracks] = useState([
                { src: null, fileName: "", isPlaying: false, progress: 0 },
                { src: null, fileName: "", isPlaying: false, progress: 0 },
                { src: null, fileName: "", isPlaying: false, progress: 0 }
            ]);
            
            // Refs é™£åˆ—
            const audioRefs = useRef([]);
            const fileInputRefs = useRef([]);

            // Aå€è³‡æ–™ï¼šç§‘ç›®(é™£åˆ—)ã€æ‡‰åˆ°ã€å¯¦åˆ°ã€æœªåˆ°
            const [examData, setExamData] = useState(() => {
                const saved = localStorage.getItem('exam_data');
                if (saved) {
                    const parsed = JSON.parse(saved);
                    if (typeof parsed.subject === 'string') {
                        return { ...parsed, subjects: [parsed.subject, "", ""], subject: undefined };
                    }
                    if (!parsed.subjects) {
                        return { ...parsed, subjects: ["", "", ""] };
                    }
                    return parsed;
                }
                return {
                    subjects: ["è‹±èª", "ç¤¾æœƒ", "è‡ªç„¶"],
                    shouldArrive: "",
                    actualArrive: "",
                    absentList: ""
                };
            });

            // --- Effect: æ™‚é˜æ»´ç­” ---
            useEffect(() => {
                const timer = setInterval(() => {
                    setNow(new Date());
                }, 1000);
                return () => clearInterval(timer);
            }, []);

            // --- Effect: å„²å­˜è³‡æ–™ ---
            useEffect(() => {
                localStorage.setItem('exam_clock_offset', offset);
            }, [offset]);

            useEffect(() => {
                localStorage.setItem('exam_data', JSON.stringify(examData));
            }, [examData]);

            // --- è¨ˆç®—é‚è¼¯ ---
            // è¨ˆç®—ã€Œä¿®æ­£å¾Œã€çš„ç•¶å‰æ™‚é–“
            const adjustedNow = useMemo(() => {
                return new Date(now.getTime() + offset);
            }, [now, offset]);

            // åˆ¤æ–·ç•¶å‰çš„æ™‚æ®µ
            const currentSlot = useMemo(() => {
                const currentMs = adjustedNow.getHours() * 3600000 + adjustedNow.getMinutes() * 60000 + adjustedNow.getSeconds() * 1000;
                
                for (let slot of SCHEDULE) {
                    const [sh, sm] = slot.start.split(':').map(Number);
                    const startMs = sh * 3600000 + sm * 60000;
                    
                    const [eh, em] = slot.end.split(':').map(Number);
                    const endMs = eh * 3600000 + em * 60000;

                    if (currentMs >= startMs && currentMs < endMs) {
                        return { ...slot, startMs, endMs, durationMs: endMs - startMs };
                    }
                }
                return null;
            }, [adjustedNow]);


            // --- Bå€ è¼ªæ’­é‚è¼¯ ---
            const reminderMessage = useMemo(() => {
                if (!currentSlot) return "éè€ƒè©¦/æº–å‚™æ™‚æ®µ";

                const currentMs = adjustedNow.getHours() * 3600000 + adjustedNow.getMinutes() * 60000 + adjustedNow.getSeconds() * 1000;
                const elapsedMinutes = Math.floor((currentMs - currentSlot.startMs) / 60000);

                let messages = [];
                let interval = 5;

                if (currentSlot.type === 'exam') {
                    messages = EXAM_MESSAGES;
                    interval = 5;
                } else {
                    messages = BREAK_MESSAGES;
                    const durationMins = currentSlot.durationMs / 60000;
                    if (durationMins >= 20) {
                        interval = 4;
                    } else {
                        interval = 2;
                    }
                }
                const index = Math.floor(elapsedMinutes / interval) % messages.length;
                return messages[index];
            }, [adjustedNow, currentSlot]);


            // --- Cå€ é€²åº¦æ¢é¡è‰²èˆ‡æ–‡å­—é‚è¼¯ ---
            const progressInfo = useMemo(() => {
                // å¦‚æœç¾åœ¨ä¸åœ¨ä»»ä½•è¡¨å®šæ™‚é–“å…§
                if (!currentSlot) {
                    return { remainingPercent: 0, color: 'stroke-gray-300', text: 'ç­‰å¾…ä¸­' };
                }

                const currentMs = adjustedNow.getHours() * 3600000 + adjustedNow.getMinutes() * 60000 + adjustedNow.getSeconds() * 1000;
                const progressMs = currentMs - currentSlot.startMs;
                const totalMs = currentSlot.durationMs;
                const remainingMs = totalMs - progressMs;
                
                // è¨ˆç®—ã€Œå‰©é¤˜ã€ç™¾åˆ†æ¯” (100 -> 0)
                const elapsedPercent = Math.min(100, Math.max(0, (progressMs / totalMs) * 100));
                const remainingPercent = 100 - elapsedPercent;

                let colorClass = 'stroke-green-500';
                let statusText = "";

                if (currentSlot.type === 'exam') {
                    // è€ƒè©¦é‚è¼¯ (ç¶­æŒä¸è®Š)
                    statusText = "è€ƒè©¦é–‹å§‹";
                    if (remainingMs <= totalMs / 2) {
                        colorClass = 'stroke-yellow-400';
                        statusText = "è€ƒè©¦æ™‚é–“å‰©ä¸‹ä¸€åŠ";
                    }
                    if (remainingMs <= 10 * 60000) {
                        colorClass = 'stroke-red-500';
                        statusText = "è€ƒè©¦æ™‚é–“ä¸åˆ°10åˆ†é˜";
                    }
                } else {
                    // ä¸‹èª²/ä¼‘æ¯é‚è¼¯ (æ–°éœ€æ±‚)
                    // > 5åˆ†é˜: ç¶ è‰²
                    // 5~3åˆ†é˜: é»ƒè‰²
                    // < 3åˆ†é˜: ç´…è‰²
                    
                    if (remainingMs > 5 * 60000) {
                        colorClass = 'stroke-green-500';
                        statusText = "ä¼‘æ¯æ™‚é–“";
                    } else if (remainingMs > 3 * 60000) {
                        colorClass = 'stroke-yellow-400';
                        statusText = "å¿«å»ä¸Šå»æ‰€å–æ°´";
                    } else {
                        colorClass = 'stroke-red-500';
                        statusText = "è«‹æ”¶æ‹¾æ±è¥¿åœ¨åº§ä½ä¸Šåå¥½";
                    }
                }

                return { remainingPercent, color: colorClass, text: statusText };
            }, [adjustedNow, currentSlot]);


            // --- UI è™•ç†å‡½å¼ ---
            const handleInputChange = (field, value) => {
                setExamData(prev => ({ ...prev, [field]: value }));
            };

            const handleSubjectChange = (index, value) => {
                const newSubjects = [...examData.subjects];
                newSubjects[index] = value;
                setExamData(prev => ({ ...prev, subjects: newSubjects }));
            };

            const adjustTime = (seconds) => {
                setOffset(prev => prev + (seconds * 1000));
            };

            // éŸ³æª”è™•ç†
            const handleFileSelect = (index, e) => {
                const file = e.target.files[0];
                if (file) {
                    const url = URL.createObjectURL(file);
                    setAudioTracks(prev => {
                        const newTracks = [...prev];
                        if (newTracks[index].src) URL.revokeObjectURL(newTracks[index].src);
                        newTracks[index] = { src: url, fileName: file.name, isPlaying: false, progress: 0 };
                        return newTracks;
                    });
                }
            };

            const togglePlay = (index) => {
                const audioEl = audioRefs.current[index];
                if (!audioEl) return;
                
                setAudioTracks(prev => {
                    const newTracks = [...prev];
                    const isNowPlaying = !newTracks[index].isPlaying;
                    
                    if (isNowPlaying) {
                        // æš«åœå…¶ä»–æ‰€æœ‰éŸ³æª”
                        newTracks.forEach((track, i) => {
                            if (i !== index && track.isPlaying) {
                                if (audioRefs.current[i]) audioRefs.current[i].pause();
                                track.isPlaying = false;
                            }
                        });
                        audioEl.play();
                    } else {
                        audioEl.pause();
                    }
                    
                    newTracks[index].isPlaying = isNowPlaying;
                    return newTracks;
                });
            };

            // æ–°å¢ï¼šé‡æ’­åŠŸèƒ½
            const replayAudio = (index) => {
                const audioEl = audioRefs.current[index];
                if (!audioEl) return;

                // é‡ç½®æ™‚é–“ä¸¦æ’­æ”¾
                audioEl.currentTime = 0;
                audioEl.play();

                setAudioTracks(prev => {
                    const newTracks = [...prev];
                    // ç¢ºä¿å…¶ä»–æš«åœ
                    newTracks.forEach((track, i) => {
                        if (i !== index && track.isPlaying) {
                            if (audioRefs.current[i]) audioRefs.current[i].pause();
                            track.isPlaying = false;
                        }
                    });
                    newTracks[index].isPlaying = true;
                    return newTracks;
                });
            };

            const handleAudioEnded = (index) => {
                setAudioTracks(prev => {
                    const newTracks = [...prev];
                    newTracks[index].isPlaying = false;
                    newTracks[index].progress = 0;
                    return newTracks;
                });
            };

            const handleTimeUpdate = (index, e) => {
                const current = e.target.currentTime;
                const duration = e.target.duration;
                const percent = (duration > 0) ? (current / duration) * 100 : 0;
                
                setAudioTracks(prev => {
                    const newTracks = [...prev];
                    newTracks[index] = { ...newTracks[index], progress: percent };
                    return newTracks;
                });
            };

            return (
                <div className="flex flex-col h-screen w-screen overflow-hidden text-gray-800">
                    
                    {/* === Cå€ (ä¸Šæ–¹ 1/3) === */}
                    <div className="h-[33vh] w-full bg-white border-b-4 border-gray-300 flex flex-row relative shadow-lg z-10">
                        {/* å·¦å´ 1/3: ç³»çµ±æ™‚é–“ */}
                        <div className="w-1/3 flex flex-col items-center justify-center border-r border-gray-200 bg-gray-50 relative group px-2">
                            <div className="text-[1.5vw] text-gray-500 font-bold mb-1 tracking-widest">ç¾åœ¨æ™‚é–“</div>
                            <div className="text-[6vw] font-black leading-none text-gray-800 tabular-nums tracking-tighter mb-2">
                                {formatTime(adjustedNow)}
                            </div>
                            <button
    onClick={resetAllData}
    className="mt-2 px-4 py-1 bg-red-100 text-red-700 rounded-lg text-sm font-bold hover:bg-red-200 btn-active"
>
    ğŸ”„ é‡ç½®è€ƒè©¦è³‡æ–™
</button>

                            {/* å¾®èª¿æŒ‰éˆ•ç¾¤çµ„ */}
                            <div className="grid grid-cols-2 gap-x-4 gap-y-1 opacity-20 group-hover:opacity-100 transition-opacity w-full max-w-[240px]">
                                {/* åˆ†é˜ */}
                                <div className="flex justify-between items-center gap-1">
                                    <button onClick={() => adjustTime(-60)} className="btn-active flex-1 py-1 bg-gray-200 rounded text-xs hover:bg-gray-300">-1åˆ†</button>
                                    <button onClick={() => adjustTime(60)} className="btn-active flex-1 py-1 bg-gray-200 rounded text-xs hover:bg-gray-300">+1åˆ†</button>
                                </div>
                                {/* ç§’ */}
                                <div className="flex justify-between items-center gap-1">
                                    <button onClick={() => adjustTime(-1)} className="btn-active flex-1 py-1 bg-gray-200 rounded text-xs hover:bg-gray-300">-1ç§’</button>
                                    <button onClick={() => adjustTime(1)} className="btn-active flex-1 py-1 bg-gray-200 rounded text-xs hover:bg-gray-300">+1ç§’</button>
                                </div>
                                {/* åŠåˆ†é˜ */}
                                <div className="col-span-2 flex justify-center gap-2 mt-1">
                                    <button onClick={() => adjustTime(-30)} className="btn-active w-1/3 py-1 bg-gray-200 rounded text-xs hover:bg-gray-300">-30ç§’</button>
                                    <button onClick={() => adjustTime(30)} className="btn-active w-1/3 py-1 bg-gray-200 rounded text-xs hover:bg-gray-300">+30ç§’</button>
                                </div>
                            </div>
                        </div>

                        {/* å³å´ 2/3: é€²åº¦æ¢å€å¡Š (è·‘é“å½¢ç‹€) */}
                        <div className="w-2/3 flex flex-col relative bg-gray-100 items-center justify-center p-4">
                            <div className="absolute inset-0 flex items-center justify-center z-10">
                                <span className="text-[4vw] font-bold text-gray-500 opacity-60 select-none whitespace-nowrap drop-shadow-sm">
                                    {progressInfo.text}
                                </span>
                            </div>
                            
                            {/* SVG è·‘é“ (Stadium Shape) */}
                            {/* å€’æ•¸: strokeDashoffset å¾ 0 (æ»¿) è®Šåˆ° 100 (ç©º) */}
                            {/* 100 - remainingPercent = elapsedPercent. 
                                Wait, if dasharray=100.
                                Full line = offset 0.
                                Empty line = offset 100.
                                We want it to shrink. So starts at 0 offset, ends at 100 offset.
                                Offset should equal (100 - remainingPercent).
                            */}
                            <svg className="w-full h-full" viewBox="0 0 300 50" preserveAspectRatio="xMidYMid meet">
                                {/* èƒŒæ™¯è»Œé“ (ç°è‰²) */}
                                <rect 
                                    x="5" y="5" width="290" height="40" rx="20" ry="20" 
                                    fill="none" 
                                    stroke="#e5e7eb" 
                                    strokeWidth="8" 
                                />
                                {/* é€²åº¦æ¢ (å½©è‰²) */}
                                <rect 
                                    x="5" y="5" width="290" height="40" rx="20" ry="20" 
                                    fill="none" 
                                    className={`track-transition ${progressInfo.color}`}
                                    strokeWidth="8"
                                    pathLength="100"
                                    strokeDasharray="100"
                                    strokeDashoffset={100 - progressInfo.remainingPercent}
                                    strokeLinecap="round"
                                />
                            </svg>
                        </div>
                    </div>

                    {/* === ä¸‹æ–¹å€å¡Šå®¹å™¨ (A + B) === */}
                    <div className="flex-1 flex flex-row h-[67vh]">
                        
                        {/* === Aå€ (å·¦å´ 1/2) === */}
                        <div className="w-1/2 flex flex-col border-r-4 border-gray-300 bg-white overflow-hidden">
                            
                            {/* Aå€ä¸Šæ–¹ 2/3: ç§‘ç›®åˆ—è¡¨ */}
                            <div className="h-2/3 flex flex-col border-b-2 border-dashed border-gray-300">
                                {EXAM_SLOTS.map((slot, index) => {
                                    const isActive = currentSlot && currentSlot.start === slot.start;
                                    return (
                                        <div key={index} className={`flex-1 flex items-center gap-2 border-b border-gray-100 last:border-0 px-4 transition-colors duration-300 ${isActive ? 'bg-yellow-300' : ''}`}>
                                            
                                            {/* ç§‘ç›®è¼¸å…¥ */}
                                            <div className="flex-1">
                                                <input 
                                                    type="text" 
                                                    value={examData.subjects[index] || ""}
                                                    onChange={(e) => handleSubjectChange(index, e.target.value)}
                                                    className="w-full text-[2.8vw] font-black bg-transparent border-b border-transparent hover:border-gray-200 focus:border-blue-500 outline-none placeholder-gray-300 leading-tight text-black"
                                                    placeholder={`ç§‘ç›® ${index + 1}`}
                                                />
                                            </div>

                                            {/* æ™‚é–“é¡¯ç¤º */}
                                            <div className="text-[3vw] font-black whitespace-nowrap text-black font-sans tracking-tight">
                                                {slot.start}~{slot.end}
                                            </div>

                                            {/* è½åŠ›æ§åˆ¶å€ */}
                                            <div className="flex flex-col items-end justify-center gap-1 w-[22%] relative">
                                                <input 
                                                    type="file" 
                                                    accept="audio/*" 
                                                    ref={el => fileInputRefs.current[index] = el} 
                                                    onChange={(e) => handleFileSelect(index, e)} 
                                                    className="hidden-input"
                                                />
                                                
                                                <div className="flex gap-1 w-full justify-end items-center">
                                                    {/* ä¸Šå‚³æŒ‰éˆ• */}
                                                    <button 
                                                        onClick={() => fileInputRefs.current[index].click()}
                                                        className="btn-active p-1 bg-gray-100 text-gray-500 rounded hover:bg-gray-200 transition-colors h-8 w-8 flex items-center justify-center"
                                                        title="ä¸Šå‚³è½åŠ›"
                                                    >
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
                                                    </button>

                                                    {/* æ’­æ”¾æŒ‰éˆ• */}
                                                    {audioTracks[index].src && (
                                                        <button 
                                                            onClick={() => togglePlay(index)}
                                                            className={`btn-active px-2 rounded text-white text-xs font-bold shadow flex items-center justify-center transition-colors h-8 min-w-[3.5rem]
                                                                ${audioTracks[index].isPlaying ? 'bg-red-500 hover:bg-red-600' : 'bg-green-500 hover:bg-green-600'}`}
                                                        >
                                                            {audioTracks[index].isPlaying ? 'æš«åœ' : 'æ’­æ”¾'}
                                                        </button>
                                                    )}

                                                    {/* é‡æ’­æŒ‰éˆ• (æ–°å¢) */}
                                                    {audioTracks[index].src && (
                                                        <button 
                                                            onClick={() => replayAudio(index)}
                                                            className="btn-active p-1 bg-blue-100 text-blue-600 rounded hover:bg-blue-200 transition-colors h-8 w-8 flex items-center justify-center"
                                                            title="é‡æ’­"
                                                        >
                                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg>
                                                        </button>
                                                    )}
                                                </div>

                                                {/* éŸ³æª”é€²åº¦æ¢ */}
                                                {audioTracks[index].src && (
                                                    <div className="w-full h-1 bg-gray-200 rounded-full mt-1 overflow-hidden">
                                                        <div 
                                                            className="h-full bg-blue-500 transition-all duration-200 ease-linear"
                                                            style={{ width: `${audioTracks[index].progress}%` }}
                                                        ></div>
                                                    </div>
                                                )}
                                                
                                                <audio 
                                                    ref={el => audioRefs.current[index] = el}
                                                    src={audioTracks[index].src || undefined} 
                                                    onEnded={() => handleAudioEnded(index)}
                                                    onTimeUpdate={(e) => handleTimeUpdate(index, e)}
                                                    hidden
                                                />
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>

                            {/* Aå€ä¸‹æ–¹ 1/3: å‡ºå¸­äººæ•¸ */}
                            <div className="h-1/3 flex flex-row bg-blue-50">
                                {/* æ‡‰åˆ° */}
                                <div className="flex-1 flex flex-col items-center justify-center border-r border-blue-200 p-2">
                                    <span className="text-[1.5vw] font-bold text-blue-800">æ‡‰åˆ°</span>
                                    <input 
                                        type="number" 
                                        value={examData.shouldArrive}
                                        onChange={(e) => handleInputChange('shouldArrive', e.target.value)}
                                        className="w-full text-center bg-transparent text-[4vw] font-bold text-blue-900 outline-none"
                                        placeholder="0"
                                    />
                                </div>
                                {/* å¯¦åˆ° */}
                                <div className="flex-1 flex flex-col items-center justify-center border-r border-blue-200 p-2">
                                    <span className="text-[1.5vw] font-bold text-green-800">å¯¦åˆ°</span>
                                    <input 
                                        type="number" 
                                        value={examData.actualArrive}
                                        onChange={(e) => handleInputChange('actualArrive', e.target.value)}
                                        className="w-full text-center bg-transparent text-[4vw] font-bold text-green-900 outline-none"
                                        placeholder="0"
                                    />
                                </div>
                                {/* æœªåˆ° */}
                                <div className="flex-[1.5] flex flex-col items-center justify-center p-2">
                                    <span className="text-[1.5vw] font-bold text-red-800">æœªåˆ°åº§è™Ÿ/å§“å</span>
                                    <textarea 
                                        value={examData.absentList}
                                        onChange={(e) => handleInputChange('absentList', e.target.value)}
                                        className="w-full h-full text-center bg-transparent text-[2vw] font-bold text-red-600 outline-none resize-none pt-2 leading-tight"
                                        placeholder="é»æ“Šè¼¸å…¥"
                                    />
                                </div>
                            </div>
                        </div>

                        {/* === Bå€ (å³å´ 1/2) === */}
                        <div className="w-1/2 bg-[#fffdf0] flex flex-col relative overflow-hidden">
                            <div className="absolute top-0 left-0 bg-yellow-400 text-yellow-900 px-4 py-2 text-xl font-bold rounded-br-lg z-20">
                                æé†’äº‹é …
                            </div>
                            <div className="flex-1 flex items-center justify-center p-12">
                                {/* å­—é«”æ”¾å¤§è‡³ 5vw */}
                                <div className="text-[5vw] font-bold text-center leading-snug text-gray-800 animate-fade-in key={reminderMessage}">
                                    {reminderMessage}
                                </div>
                            </div>
                            <div className="h-4 bg-stripes w-full"></div>
                        </div>
                    </div>
                    
                    <style>{`
                        .bg-stripes {
                            background-image: linear-gradient(45deg, #fbbf24 25%, transparent 25%, transparent 50%, #fbbf24 50%, #fbbf24 75%, transparent 75%, transparent);
                            background-size: 20px 20px;
                        }
                        @keyframes fadeIn {
                            from { opacity: 0; transform: translateY(10px); }
                            to { opacity: 1; transform: translateY(0); }
                        }
                        .animate-fade-in {
                            animation: fadeIn 0.5s ease-out forwards;
                        }
                    `}</style>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
update exam schedule
